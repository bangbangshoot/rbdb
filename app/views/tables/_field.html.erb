<% case column
when ForeignKey %>
  <% if r = column.dest.ar_class.find_by_id(row[column.name]) %>
    <%= link_to most_likely_name(r), datab_table_path(column.dest.db, column.dest) %>
  <% else %>
    <% row[column.name] %>
  <% end %>
<% else %>
  <% case row[column.name]
  when nil %>
    -
  <% when Fixnum %>
    <% if column.name == "id" %>
      <%= row[column.name] %>
    <% else %>
      <%= number_with_delimiter row[column.name], '.' %>
    <% end %>
  <% when DateTime, Time, Date %>
    <%= date_ago row[column.name] %>
  <% when String %>
    <%= edit_in_place row, column.name, :url => datab_table_row_path(@datab, @table, row[:id]), :content => string(row[column.name]), :dom_id => "row_#{row[:id]}" %>
  <% when TrueClass, FalseClass %>
    <%= yes_no row[column.name] %>
  <% else %>
    <%= row[column.name].to_s %>
  <% end %>
<% end %>